jaxon.config.requestURI="/logging/jaxon";jaxon.config.statusMessages=false;jaxon.config.waitCursor=true;jaxon.config.version="Jaxon 5.x";jaxon.config.defaultMode="asynchronous";jaxon.config.defaultMethod="POST";jaxon.config.responseType="JSON";jaxon.setCsrf('csrf-token');Lagdo={};Lagdo.DbAdmin={};Lagdo.DbAdmin.Ajax={};Lagdo.DbAdmin.Ajax.Log={};if(Lagdo.DbAdmin.Ajax.Log.Commands===undefined){Lagdo.DbAdmin.Ajax.Log.Commands={};}
Lagdo.DbAdmin.Ajax.Log.Commands.page=function(){return jaxon.request({type:'class',name:'Lagdo.DbAdmin.Ajax.Log.Commands',method:'page'},{parameters:arguments,bags:["dbadmin.logging"]});};Lagdo.DbAdmin.Ajax.Log.Commands.show=function(){return jaxon.request({type:'class',name:'Lagdo.DbAdmin.Ajax.Log.Commands',method:'show'},{parameters:arguments,bags:["dbadmin.logging"]});};Lagdo.DbAdmin.Ajax.Log.Commands.render=function(){return jaxon.request({type:'class',name:'Lagdo.DbAdmin.Ajax.Log.Commands',method:'render'},{parameters:arguments,bags:["dbadmin.logging"]});};Lagdo.DbAdmin.Ajax.Log.Commands.clear=function(){return jaxon.request({type:'class',name:'Lagdo.DbAdmin.Ajax.Log.Commands',method:'clear'},{parameters:arguments,bags:["dbadmin.logging"]});};Lagdo.DbAdmin.Ajax.Log.Commands.visible=function(){return jaxon.request({type:'class',name:'Lagdo.DbAdmin.Ajax.Log.Commands',method:'visible'},{parameters:arguments,bags:["dbadmin.logging"]});};jaxon.dom.ready(()=>jaxon.processCustomAttrs());jaxon.dbadmin=(function(){const countTableCheckboxes=(checkboxId)=>$('#dbadmin-table-'+checkboxId+'-count').html($('.dbadmin-table-'+checkboxId+':checked').length);const selectTableCheckboxes=(checkboxId)=>{$('#dbadmin-table-'+checkboxId+'-all').change(function(){$('.dbadmin-table-'+checkboxId,'#jaxon-dbadmin').prop('checked',this.checked);countTableCheckboxes(checkboxId);});$('.dbadmin-table-'+checkboxId).change(function(){countTableCheckboxes(checkboxId);});};const selectAllCheckboxes=(checkboxId)=>$('#'+checkboxId+'-all').change(function(){$('.'+checkboxId,'#jaxon-dbadmin').prop('checked',this.checked);});const setFileUpload=(container,buttonId,fileInputId)=>{$(buttonId).click(()=>$(fileInputId).trigger("click"));$(container).on('change',':file',function(){const fileInput=$(this);const numFiles=fileInput.get(0).files?fileInput.get(0).files.length:1;const label=fileInput.val().replace(/\\/g,'/').replace(/.*\//,'');const textInput=$(container).find(':text');const text=numFiles>1?numFiles+' files selected':label;textInput.length>0&&textInput.val(text);});};const editor={ace:null,page:'',fontSize:'13px',modes:{sql:'ace/mode/sql',mysql:'ace/mode/mysql',pgsql:'ace/mode/pgsql',},};const createSqlQueryEditor=function(containerId,driver){editor.ace=ace.edit(containerId,{mode:editor.modes[driver]??editor.modes.sql,selectionStyle:"text",dragEnabled:false,useWorker:false,enableLiveAutocompletion:true,showPrintMargin:false,});editor.ace.setTheme("ace/theme/textmate");editor.ace.session.setUseWrapMode(true);document.getElementById(containerId).style.fontSize=editor.fontSize;};const createSqlSelectEditor=(containerId,driver)=>{editor.ace=ace.edit(containerId,{mode:editor.modes[driver]??editor.modes.sql,selectionStyle:"text",dragEnabled:false,useWorker:false,showPrintMargin:false,showLineNumbers:false,showGutter:false,readOnly:true,});editor.ace.setTheme("ace/theme/textmate");editor.ace.session.setUseWrapMode(true);editor.ace.resize();document.getElementById(containerId).style.fontSize=editor.fontSize;};const getSqlQuery=()=>{const selectedText=editor.ace.getSelectedText();return selectedText?selectedText:editor.ace.getValue();};const setSqlQuery=(query)=>editor.ace.session.setValue(query);const getCommandQuery=(commandId)=>$(`#dbadmin-history-command-${commandId}`).text();const history={editSqlQuery:(commandId)=>setSqlQuery(getCommandQuery(commandId)),insertSqlQuery:(commandId)=>editor.ace.insert(getCommandQuery(commandId)),};return{countTableCheckboxes,selectTableCheckboxes,selectAllCheckboxes,setFileUpload,createSqlQueryEditor,createSqlSelectEditor,getSqlQuery,setSqlQuery,history,};})();